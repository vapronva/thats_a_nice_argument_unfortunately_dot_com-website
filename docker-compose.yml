version: "3"

services:
  api:
    image: registry.vapronva.pw/api/thats_a_nice_argument_unfortunately_dot_com-api:latest
    restart: unless-stopped
    networks:
      - "wa-thatsaniceargumentunfortunately-network"
    container_name: "web_api-thats-a-nice-argument-unfortunately-dot-com"
    environment:
      - IPINFO_API_KEY=${IPINFO_API_KEY}
      - PROXYCHECK_API_KEY=${PROXYCHECK_API_KEY}
      - MONGODB_URI=${MONGODB_URI}
      - VIRTUAL_HOST=api.thats-a-nice-argument-unfortunately.com
      - VIRTUAL_PORT=8000
  web:
    image: registry.vapronva.pw/website/thats_a_nice_argument_unfortunately_dot_com-website:latest
    restart: unless-stopped
    networks:
      - "wa-thatsaniceargumentunfortunately-network"
    container_name: "web-thats-a-nice-argument-unfortunately-dot-com"
    environment:
      - VIRTUAL_HOST=thats-a-nice-argument-unfortunately.com
      - VIRTUAL_PORT=8000

networks:
  wa-thatsaniceargumentunfortunately-network:
    external: true
